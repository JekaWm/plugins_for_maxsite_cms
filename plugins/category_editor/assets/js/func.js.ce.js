function cyr2lat(e){for(var t=new Array(["а","a"],["б","b"],["в","v"],["г","g"],["д","d"],["е","e"],["ё","yo"],["ж","zh"],["з","z"],["и","i"],["й","y"],["к","k"],["л","l"],["м","m"],["н","n"],["о","o"],["п","p"],["р","r"],["с","s"],["т","t"],["у","u"],["ф","f"],["х","h"],["ц","c"],["ч","ch"],["ш","sh"],["щ","shch"],["ъ",""],["ы","y"],["ь",""],["э","e"],["ю","yu"],["я","ya"],["А","a"],["Б","b"],["В","v"],["Г","g"],["Д","d"],["Е","e"],["Ё","yo"],["Ж","zh"],["З","z"],["И","i"],["Й","y"],["К","k"],["Л","l"],["М","m"],["Н","n"],["О","o"],["П","p"],["Р","r"],["С","s"],["Т","t"],["У","u"],["Ф","f"],["Х","h"],["Ц","c"],["Ч","ch"],["Ш","sh"],["Щ","shch"],["Ъ",""],["Ы","y"],["Ь",""],["Э","e"],["Ю","yu"],["Я","ya"],["a","a"],["b","b"],["c","c"],["d","d"],["e","e"],["f","f"],["g","g"],["h","h"],["i","i"],["j","j"],["k","k"],["l","l"],["m","m"],["n","n"],["o","o"],["p","p"],["q","q"],["r","r"],["s","s"],["t","t"],["u","u"],["v","v"],["w","w"],["x","x"],["y","y"],["z","z"],["A","a"],["B","b"],["C","c"],["D","d"],["E","e"],["F","f"],["G","g"],["H","h"],["I","i"],["J","j"],["K","k"],["L","l"],["M","m"],["N","n"],["O","o"],["P","p"],["Q","q"],["R","r"],["S","s"],["T","t"],["U","u"],["V","v"],["W","w"],["X","x"],["Y","y"],["Z","z"],[" ","_"],["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["-","_"]),i=new String,a=0;a<e.length;a++){ch=e.charAt(a);for(var r="",o=0;o<t.length;o++)ch==t[o][0]&&(r=t[o][1]);i+=r}return i.replace(/[-]{2,}/gim,"-").replace(/\n/gim,"")}function get_cookie(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?unescape(t[2]):null}function set_cookie(e,t,i,a,r,o,n,l){var c=e+"="+escape(t);if(i){var s=new Date(i,a,r);c+="; expires="+s.toGMTString()}o&&(c+="; path="+escape(o)),n&&(c+="; domain="+escape(n)),l&&(c+="; secure"),document.cookie=c}function delete_cookie(e){var t=new Date;t.setTime(t.getTime()-1),document.cookie=e+="=; expires="+t.toGMTString()}function escapeHtml(e){return e+=" ",e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),e.substring(0,e.length-1)}function add_list_cookie(e,t){var i=get_cookie(CookieKeyOLC);i||(i="empty");var a=i.split(" ");a.remove(t),e===!0&&(a[a.length]=t),set_cookie(CookieKeyOLC,a.join(" "))}function open_list_items(){var e=get_cookie(CookieKeyOLC);if(!e)return!1;var t=e.split(" ");t.forEach(function(e,t){e&&("all_vm_title"==e&&$(".virtual-menu-all-title").trigger("click"),$("span#"+e).closest("li").children("ul").is(":visible")||$("span#"+e).trigger("click"))})}function slideup_all_lists(){$(".list-container > ul ul, .virtual-menu-container ul ul").map(function(e,t){$(t).is(":visible")&&$(t).slideUp(200,function(){$("span.e-close").map(function(e,t){"-"==$(t).text()&&$(t).text("+")})}),set_cookie(CookieKeyOLC,"")})}function start_sortable_category(){$("ul.cat-list").nestedSortable({forcePlaceholderSize:!0,forceHelperSize:!0,listType:"ul",handle:".e-handler",helper:"original",items:"li",opacity:.6,placeholder:"placeholder",revert:250,tabSize:15,tolerance:"pointer",delay:150,distance:10,revert:!0,isTree:!0,maxLevels:20,expandOnHover:700,startCollapsed:!0,start:function(e,t){var i="",a=$(t.item).parent("ul");window.StartUl=a,$(t.item).data("category-id")?i='<li class="is-category-li li-empty ">Нет вложенных категорий</li>':$(t.item).data("page-id")&&(i='<li class="is-category-li li-empty">Нет вложенных страниц</li>'),a.children("li").length<3&&a.append(i)},stop:function(e,t){if($(t.item).siblings("li.li-go-other").length)$("ul.cat-list").sortable("cancel"),popup_ce_add_center("В этот список нельзя положить элемент");else{var i="<p>Вы действительно хотите переместить?</p>",a=$(t.item).parent("ul");$(t.item).data("category-id")?a.hasClass("is-pages")?(popup_ce_add_center("Категорию нельзя сливать со страницами"),$("ul.cat-list").sortable("cancel")):CEjConfirm(i,"Перемещение",function(e){e?($(t.item).siblings("li.li-empty").remove(),fixed_sort_pos_category($(t.item),a)):$("ul.cat-list").sortable("cancel")}):$(t.item).data("page-id")?a.hasClass("is-category")?(popup_ce_add_center("Страницу нельзя сливать с категориями"),$("ul.cat-list").sortable("cancel")):CEjConfirm(i,"Перемещение",function(e){e?($(t.item).siblings("li.li-empty").remove(),fixed_sort_pos_page($(t.item),a)):$("ul.cat-list").sortable("cancel")}):console.log("ошибка")}}})}function fixed_sort_pos_category(e,t){var i=window.StartUl.parent("li").data("category-id"),a=t.parent("li").data("category-id");$.CeEditor.category_id=e.data("category-id"),i==a?$.CeEditor.custom_val_string=-1:$.CeEditor.custom_val_string=a?a:0;var r=[];t.children("li").map(function(e,t){$(t).data("category-id")&&(r[r.length]=$(t).data("category-id"))}),$.CeEditor.SetOrderCats(r,function(e){e=JSON.parse(e),popup_ce_add_center(e.info)})}function fixed_sort_pos_page(e,t,i){var a=window.StartUl.parent("li").data("category-id"),r=t.parent("li").data("category-id");r||0===r?_help_fixed_pp_inner_cat(e,a,r):_help_fixed_pp_inner_page(e,a,r)}function _help_fixed_pp_inner_page(e,t,i){var a=$(e).parent("ul.is-pages");if(!a)return!1;var r=a.parent("li.is-page-li").data("page-id"),o=[];a.children("li").map(function(e,t){$(t).data("page-id")&&(o[o.length]=$(t).data("page-id"))});var n=-1,l=t?t:0;$.CeEditor.categoryes_id=[l],$.CeEditor.page_id=$(e).data("page-id"),$.CeEditor.custom_val_string=r,$.CeEditor.SetOrderPages(o,n,function(e){window.StartUl=0,e=JSON.parse(e),popup_ce_add_center(e.info)})}function _help_fixed_pp_inner_cat(e,t,i){var a=$(e).parent("ul.is-pages");if($.CeEditor.page_id=$(e).data("page-id"),$.CeEditor.custom_val_string=0,t==i){$.CeEditor.categoryes_id[0]=t?t:0;var r=[];a.children("li").map(function(e,t){$(t).data("page-id")&&(r[r.length]=$(t).data("page-id"))}),$.CeEditor.SetOrderPages(r,i,function(e){e=JSON.parse(e),popup_ce_add_center(e.info)})}else{$.CeEditor.categoryes_id[0]=t?t:0,$.CeEditor.custom_val_string=-5;var r=[];a.children("li").map(function(e,t){$(t).data("page-id")&&(r[r.length]=$(t).data("page-id"))}),$.CeEditor.SetOrderPages(r,i,function(e){e=JSON.parse(e),popup_ce_add_center(e.info)})}}function update_childs_list_pages(e){var t=$('.list-container ul li[data-category-id="'+e+'"]').children("ul.is-pages");if(t.find("a.go-other-pages").length)return!1;$.CeEditor.categoryes_id=["0"];var i=["0"];$.CeEditor.GetOtherPages(e,i,function(e,t){e=JSON.parse(e),"complite"==e.status&&($(t).children("li").remove(),$(t).append(e.pages_list)),setTimeout(function(){open_list_items()},400)},t)}function sort_items_list(e){var t=e,i=t.children("li").get();i.sort(function(e,t){var i=$(e).text().toUpperCase(),a=$(t).text().toUpperCase();return a>i?-1:i>a?1:0}),$.each(i,function(e,i){t.append(i)})}var CookieKeyOLC="ce_list";Array.prototype.remove=function(e){var t=this.indexOf(e);return-1!=t?this.splice(t,1):!1};
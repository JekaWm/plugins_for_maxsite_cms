$(document).ready(function(e){$(".list-container").on("click",".line > a",function(){var e=$(this).siblings("span.e-close");return e.trigger("click"),!1}),$(".list-container, .virtual-menu-container").on("click","span.e-close",function(){var e=$(this).parent("div").parent("li"),t=$(this).attr("id");return $(e).children("ul").children("li").size()&&($(e).children("ul").is(":visible")?($(e).children("ul").slideUp(200),$(this).text("+"),add_list_cookie(!1,t)):($(e).children("ul").slideDown(200),$(this).text("-"),add_list_cookie(!0,t))),!1}),$(".ce-top-panel").on("click","#ce_panel_closeall",function(){return slideup_all_lists(),!1}),$(".list-container, .virtual-tree").on("mouseover",".line",function(){$(this).addClass("li-hover")}),$(".list-container, .virtual-tree").on("mouseout",".line",function(){$(this).removeClass("li-hover")});var t,i=0,n=0,s=[];$(".list-container").on("click",".line",function(e){var l;n=$(this).index(".line"),e.ctrlKey||e.shiftKey||$(".list-container .line").removeClass("line-selected"),e.shiftKey?(n>i&&(t=$(".line").slice(i,n+1),t.map(function(e,t){$(t).is(":visible")&&($(t).addClass("line-selected"),s[s.length]=e)}),popup_ce_add_top("Выделено эелементов "+s.length),s=[]),i>n&&(t=$(".line").slice(n,i+1),t.map(function(e,t){$(t).is(":visible")&&($(t).addClass("line-selected"),s[s.length]=e)}),popup_ce_add_top("Выделено эелементов "+s.length),s=[])):e.ctrlKey&&$(this).hasClass("line-selected")?$(this).removeClass("line-selected"):$(this).addClass("line-selected"),i=n,e.ctrlKey&&(l=$(".line-selected").length,popup_ce_add_top("Выделено эелементов "+l))}),$(".list-container").on("dblclick",".line",function(e){if($(e.target).hasClass("e-handler"))return!1;if($(e.target).hasClass("e-close"))return!1;var t=$(this).parent("li");$(t).next("li").is(":visible")?($(t).nextAll("li").css({display:"none"}),$(this).addClass("next-hide")):($(t).nextAll("li").css({display:"block"}),$(this).removeClass("next-hide"))}),$(".list-container").on("click",".go-other-pages",function(){var e=$(this).data("category-id"),t=["0"];return $.CeEditor.GetOtherPages(e,t,function(e,t){var i=t.parent("li").parent("ul");$(i).children("li").remove(),e=JSON.parse(e),$(i).append(e.pages_list),setTimeout(function(){open_list_items()},400)},$(this)),!1}),$(".list-container").on("click","a.publish-switch",function(){var e=$(this).closest(".line").data("obj-type"),t=$(this).closest(".line").data("obj-id");return $.CeEditor.ChangeStatusPage(e,t,function(e,t){var i=t.closest("li");e=JSON.parse(e),"complite"==e.status?(popup_ce_add_center(e.info),"publish"==e.new_status?$(i).removeClass("no-publish"):$(i).addClass("no-publish")):popup_ce_add_center(e.info)},$(this)),!1}),$(".list-container").on("click","a.obj-copy",function(){var e=$(this).closest(".line").data("obj-type"),t=$(this).closest(".line").data("obj-id"),i=$(this).closest("li"),n=$(this),s="<p>Будет создана копия объекта</p>";return CEjConfirm(s,"Конфигурация копирования",function(s){return s?void $.CeEditor.CopyObject(e,t,function(e,t){e=JSON.parse(e),"complite"==e.status?($(i).after(e.item_li),popup_ce_add_center(e.info)):popup_ce_add_center(e.info)},n):(popup_ce_add_center("Отмена действия"),!1)}),!1}),$(".list-container").on("click","a.obj-delete",function(){var e=$(this).closest(".line").data("obj-type"),t=$(this).closest(".line").data("obj-id"),i=$(this),n="<p>Вы действительно хотите удалить объект?</p>";return CEjConfirm(n,"Удаление объекта",function(n){return n?void $.CeEditor.DeleteObject(e,t,function(e,t){if(e=JSON.parse(e),"complite"==e.status){console.log(t);var i=t.closest("li");$(i).fadeOut(800,function(){$(this).remove()}),popup_ce_add_center(e.info)}else popup_ce_add_center(e.info)},i):(popup_ce_add_center("Отмена действия"),!1)}),!1}),$(".list-container").on("click","a.obj-chpgs-update",function(e){return CatId=$(this).parent(".ce-toolbar").data("id-obj"),update_childs_list_pages(CatId),!1}),$(".list-container").on("click","a.obj-edit",function(e){var t=$(this).closest("div.line").data("edit-url");return window.open(t,"_blank"),!1}),$(".list-container").on("click","a.obj-psort",function(e){var t=$(this).closest("li.is-category-li").children("ul.is-pages");return sort_items_list(t),!1}),$(".ce-setting-field").on("focusout","input.c-name",function(){var e=$(this).closest(".flex"),t=$(this).val();e.find("input.c-key").val(cyr2lat(t))})});
/*
 * jqCoolGallery
 * 
 * Version: 1.8
 * Requires jQuery 1.5+
 * Docs: http://www.jqcoolgallery.com
 * 
 * (c) copyright 2011-2012, Redtopia, LLC (http://www.redtopia.com). All rights reserved.
 * 
 * Licensed under the GNU General Public License, version 3 (GPL-3.0)
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, version 3 of the License.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>
 */
(function(a){var b=function(z,R){var Q=function(at){if(!Z.debug){return}if(window.console){var ar=typeof(at);if(ar==="string"){if(window.console.log){window.console.log("jqCoolGallery: "+at)}}else{if(ar==="object"){if(window.console.dir){window.console.dir(at)}else{if(window.console.log){window.console.log("jqCoolGallery: "+at)}}}}}};var V=function(aw,ay,az){var ax=aw.width,aA=aw.height,av=0,au=0,ar=0,at;for(at=1;at<=2;at++){if(ay>0){av=ax-ay}else{av=0}if(az>0){au=aA-az}else{au=0}if(av<=0&&au<=0){break}else{if(av>=au){ar=Math.round((100*av)/ax);au=Math.round((aA*ar)/100)}else{ar=Math.round((100*au)/aA);av=Math.round((ax*ar)/100)}ax=ax-av;aA=aA-au}}return({width:ax,height:aA})};var aq=function(au,at,ar){a(m).html(au);L(at,null,ar)};var L=function(av,aw,ar){if(aw){a(m).html(aw)}var au=av.pageY-a(O).outerHeight()-5,at=av.pageX-a(O).outerWidth();if(ar==="right"){at=av.pageX-10}a(O).css({top:au,left:at});a(O).stop(true).fadeTo(200,0.8,function(){a(O).fadeTo(2000,0)})};var B=function(av,ar){var au=av.pageY-a(O).outerHeight()-5,at=av.pageX-a(O).outerWidth();if(ar==="right"){at=av.pageX-10}a(O).css({top:au,left:at});a(O).stop(true).fadeTo(10,0,function(){a(O).css({top:-1000,left:-1000})})};var Y=function(){w.nextImage()};var W=function(){if(H===1){return}Q("playing");H=1;a(p).addClass("jqcg-ctl-pause");if(S<0){y(0)}d=setInterval(Y,Z.playSpeed)};var G=function(){if(H===0){return}Q("stopping");H=0;a(p).removeClass("jqcg-ctl-pause");clearInterval(d);d=null};var N=function(ar,at,au){if(ar.complete){return(at(ar))}a(ar).error(function(){a(this).unbind("load");return(null)});a(ar).load(function(){a(ar).unbind("load");return(at(a(this)))});a(ar).trigger("load")};var c=function(av,at,aC,ay,aB){var az=V({width:aC,height:ay},Z.thumbWidth,Z.thumbHeight),aD=Z.thumbWidth,aA=Z.thumbHeight,au=0,ax=0,aw=0,aF,ar,aE=a("<li></li>").appendTo(av);Q("adding thumb: "+at+" ["+aC+","+ay+"], scaled to: ["+az.width+","+az.height+"]");au=Math.floor((aA-az.height)/2);aF=V({width:aC,height:ay},Z.thumbHelperMaxWidth,Z.thumbHelperMaxHeight);if(Z.thumbStyle==="grid"){aw=Z.thumbMargin;if((aB+1)%F!==0){ax=Z.thumbMargin}}else{switch(Z.thumbLocation){case"top":case"bottom":ax=Z.thumbMargin;break;case"left":case"right":aw=Z.thumbMargin;break}}a(aE).css({width:aD+"px",height:aA+"px",padding:Z.thumbPadding+"px",borderWidth:Z.thumbBorderWidth+"px",marginRight:ax+"px",marginBottom:aw+"px"});a(aE).addClass("jqcg-thumb-loading");ar=a('<img src="'+at+'" width="'+az.width+'" height="'+az.height+'" alt="" />').appendTo(aE);if(au>0){a(ar).css({paddingTop:au+"px"})}N(ar,function(aG){a(aE).removeClass("jqcg-thumb-loading")},function(aG){a(aE).removeClass("jqcg-thumb-loading");a(aE).addClass("jqcg-thumb-error")});if(Z.thumbStyle==="list"){if(Z.thumbLocation==="top"||Z.thumbLocation==="bottom"){a(av).css({width:(parseInt(a(av).css("width"),10)+a(aE).outerWidth(true))+"px"})}else{a(av).css({height:(parseInt(a(av).css("height"),10)+a(aE).outerHeight(true))+"px"})}}a(aE).hover(function(aM){a(this).addClass("jqcg-thumb-hover");if(!Z.thumbHelper){return}var aH=a(ar).outerWidth(),aO=a(ar).outerHeight(),aJ=a(ar).offset(),aI=a(this).offset(),aK=a(ap).offset(),aL=(a(window).scrollLeft()+a(window).innerWidth())-(aJ.left+aH),aN=(a(window).scrollTop()+a(window).innerHeight())-(aJ.top+aO),aG;a(u).attr("src",at);a(u).css({width:aF.width+"px",height:aF.height+"px"});aG=(aI.top-a(ak).outerHeight()-5);if(Z.thumbStyle==="list"&&Z.thumbLocation==="top"){aG=(aI.top+aA)+5}a(ak).css({top:aG+"px",left:((aI.left+(aD/2))-(a(ak).outerWidth()/2))+"px",display:"block"})},function(){a(this).removeClass("jqcg-thumb-hover");if(!Z.thumbHelper){return}a(u).attr("src","");a(ak).css({display:"none"})});a(aE).click(function(){var aG=a(this).index();G();aa(aG)})};var P=function(ar){var at=a(ar).attr("src")+"?x="+Math.floor(Math.random()*100000);a(ar).attr("src",at)};var ac=function(ar,au,av,aw,at){Q("adding gallery item: "+au);a(ar).css({display:"block",textAlign:Z.imageAreaAlign,top:0,left:0,opacity:0,position:"absolute"});if((Z).imageAreaWidth>0){a(ar).width((Z).imageAreaWidth)}if((Z).imageAreaHeight>0){a(ar).height((Z).imageAreaHeight)}a(ar).addClass("jqcg-item-loading");a(ar).find(".caption").hide();var ay=a(at).children(".jqcg-thumbs-list");var ax=a(ar).children("img").first();N(ax,function(aB){a(ar).removeClass("jqcg-item-loading");var az=a(aB).attr("src");var aE=a(aB).width();var aF=a(aB).height();var aD=V({width:aE,height:aF},Z.imageAreaWidth,Z.imageAreaHeight);a(aB).width(aD.width);a(aB).height(aD.height);Q("loading image: "+az+", width: "+aE+", height: "+aF);var aG=av;var aC=aw;var aH=a(aB).attr("data-thumb");if(typeof(aH)==="undefined"){aH=az;aG=aE;aC=aF}else{var aA=a(aB).attr("data-thumb-width");if(typeof(aA)!=="undefined"){aG=parseInt(aA,10)}aA=a(aB).attr("data-thumb-height");if(typeof(aA)!=="undefined"){aC=parseInt(aA,10)}}if(aG===-1||aC===-1){aH=az;aG=aE;aC=aF}Q("using thumb: "+aH+", width: "+aG+", height: "+aC);c(ay,aH,aG,aC,au)})};var s=function(ar,aw){if((Z).imageAreaWidth>0){a(aw).width((Z).imageAreaWidth)}if((Z).imageAreaHeight>0){a(aw).height((Z).imageAreaHeight)}a(aw).css("position","relative");var au=Z.thumbImageWidth;var av=Z.thumbImageHeight;var at=a(aw).attr("data-thumb-width");if(typeof(at)!=="undefined"){au=parseInt(at,10)}at=a(aw).attr("data-thumb-height");if(typeof(at)!=="undefined"){av=parseInt(at,10)}a(aw).children("li").each(function(ax){ac(this,ax,au,av,ar)})};var M=function(aA,aw){Q("adding gallery: "+aw);I++;a(aA).width(Z.galleryTileWidth);a(aA).height(Z.galleryTileHeight);a(aA).attr("data-gallery-ix",aw);a(aA).addClass("jqcg-gallery-item");a(aA).addClass("jqcg-preloader");if(Z.galleryColumnCount>0){if(I%Z.galleryColumnCount===0){a(aA).addClass("jqcg-gallery-item-last")}}var ay=a(aA).children("img");if(!ay.length){ay=a(aA).find("a img")}Q("gallery thumb - found: "+ay.length);var ax=a('<ul class="jqcg-thumbs-list"></ul>').appendTo(aA);if(Z.thumbStyle==="grid"){a(ax).css({height:"auto",width:f+"px"})}else{a(ax).css({height:Z.thumbHeight+(Z.thumbPadding*2)+(Z.thumbBorderWidth*2)+"px"})}a(ax).hide();var az="";var at=a(aA).children(".caption");if(at.length){az=a(at).html();a(at).remove()}else{var au=a(aA).attr("data-title");var av=a(aA).attr("data-desc");if(au&&au.length){az='<p class="jqcg-gallery-caption-title">'+au+"</p>"}if(av&&av.length){az+='<p class="jqcg-gallery-caption-desc">'+av+"</p>"}}Q("gallery caption: "+az);if(az.length&&Z.galleryHoverCaption){at=a('<div class="jqcg-gallery-caption caption"><div class="jqcg-gallery-caption-content">'+az+"</div></div>").appendTo(aA)}N(ay,function(aB){Q("loading gallery thumb: ["+a(aB).attr("src")+"]");a(aA).removeClass("jqcg-preloader");var aD=Z.galleryTileWidth;a(aB).attr("jqcg-width",Z.galleryTileWidth);a(aB).attr("jqcg-height",Z.galleryTileHeight);a(aB).css("position","absolute");var aC=0;var aE=0;if(Z.galleryHoverExpand){aD+=(Z.galleryHoverExpandPx*2);aC=Z.galleryHoverExpandPx*-1;aE=aC}a(at).css({opacity:0,width:aD+"px",position:"absolute",bottom:aC,left:aE,display:"block"})},function(aB){Q("FAILED gallery thumb: ["+a(aB).attr("src")+"]");a(aA).removeClass("jqcg-preloader");a(aA).addClass("jqcg-failed");a(aB).width(0);a(aB).height(0);a(aB).attr("src","");var aC=Z.galleryTileWidth});var ar=a(aA).children("ul.jqcg-viewer-slides");s(aA,ar);a(aA).hover(function(aF){a(this).addClass("jqcg-gallery-hover");if(h&&h.length){aq(h,aF)}if(Z.galleryHoverExpand){var aD=a(this).children("img").first();if(!aD.length){aD=a(this).find("a img")}var aC=parseInt(a(aD).attr("jqcg-width"),10)+(Z.galleryHoverExpandPx*2);var aE=parseInt(a(aD).attr("jqcg-height"),10)+(Z.galleryHoverExpandPx*2);a(aD).css({zIndex:1000});var aB={top:"-"+Z.galleryHoverExpandPx+"px",left:"-"+Z.galleryHoverExpandPx+"px",width:aC+"px",height:aE+"px"};a(aD).addClass("jqcg-gallery-hover-expand");a(aD).stop(true);a(at).stop();a(aD).animate(aB,Z.animateInSpeed,function(){if(Z.galleryHoverCaption){a(at).fadeTo(Z.animateInSpeed,0.7)}})}else{if(Z.galleryHoverCaption){a(at).stop().fadeTo(Z.animateInSpeed,0.7)}}},function(aG){a(this).removeClass("jqcg-gallery-hover");B(aG);if(Z.galleryHoverExpand){var aE=a(this).children("img").first();if(!aE.length){aE=a(this).find("a img")}var aD=a(this).children(".jqcg-gallery-caption");var aC=a(aE).attr("jqcg-width");var aF=a(aE).attr("jqcg-height");a(aE).css({zIndex:1});var aB={marginTop:0,marginLeft:0,top:0,left:0,width:aC+"px",height:aF+"px"};a(aE).removeClass("jqcg-gallery-hover-expand");a(aE).stop(true);a(at).stop(true);if(Z.galleryHoverCaption){a(at).fadeTo(Z.animateOutSpeed,0,function(){a(aE).animate(aB,Z.animateOutSpeed)})}else{a(aE).animate(aB,Z.animateOutSpeed)}}else{if(Z.galleryHoverCaption){a(at).stop().fadeTo(Z.animateOutSpeed,0)}}});if(h&&h.length){a(aA).mousemove(function(aB){L(aB,h)})}a(aA).click(function(){a(this).trigger("mouseout");var aB=parseInt(a(this).attr("data-gallery-ix"),10);var aC=true;if(Z.fnGalleryClick!==null&&!Z.fnGalleryClick(aB,this)){aC=false}if(aC){y(aB)}});a(ar).hide()};var k=function(){var aw=a(j).offset();var ar=a(j).width();var au=a(j).height();var av=aw.top+(au/2)-(a(T).height()/2);var at=aw.left+(ar/2)-(a(T).width()/2);a(T).css({top:av,left:at});a(T).show()};var D=function(){a(T).hide()};var t=function(au,at,ar,av){if(Z.forceDemandReload){if(au.indexOf("?")>0){au+="&"}else{au+="?"}au+=Z.forceDemandReloadParam+"="+U}a.ajax({url:au,type:"get",dataType:"html",success:function(aw){a(at).removeAttr("rel");var ax;if(a(aw).is("ul")){ax=aw}else{ax=a(aw).find("ul")}if(!ax.length){alert("Failed to load gallery: element UL was not found.");return}ax=a(ax).appendTo(at).addClass("jqcg-viewer-slides");s(at,ax);if(av){av()}},error:function(){D();a(at).removeAttr("rel");alert("An error occurred while loading the specified gallery: ["+au+"]")}})};var l=function(aw){if(S>=0){if(aw){a(ad).hide()}var au=a(x).find("li[data-gallery-ix='"+S+"']");var at=ad.find("ul.jqcg-viewer-slides");var ar=ap.children("ul.jqcg-thumbs-list");if(an>0&&an<K){var av=a(at).children("li:nth-child("+(an+1)+")");a(av).css("opacity",0)}a(ar).appendTo(au);a(ar).hide();a(at).appendTo(au);a(at).hide();a(ad).find(".jqcg-viewer-pagedesc").html("");S=-1;K=0;an=-1}};var aa=function(ar){Q("showing image: ["+ar+"]");if(S<0){y(0);return}if(ar===an){return}if(K===0||ar>K){if(!Z.loopGalleries){return}var av=S+1;if(av>I){av=0}if(av!==S){y(av)}return}var aw=an;an=ar;var au=a(af).children("ul").children("li");if(aw>=0&&aw<K){a(au[aw]).stop().fadeTo(500,0,function(){a(au[an]).stop().fadeTo(500,1)})}else{a(au[an]).stop().fadeTo(500,1)}var at=a(au[ar]).children(".caption").html();at=at?at:"";a(am).html(at);var ay=a(ad).find(".jqcg-viewer-pagedesc");if(ay.length){var ax=Z.pageDescFormat.replace("%pageNum%",ar+1);ax=ax.replace("%pageCount%",au.length);a(ay).html(ax)}J(an,true)};var g=function(at){if(Z.thumbStyle==="list"){a(at).css({margin:"0"});if(Z.thumbLocation==="top"||Z.thumbLocation==="bottom"){var ar=a(at).css("width");if(ar<ai){a(A).hide();a(v).hide();a(ap).css({width:(ai-(r+ae))+"px"})}else{a(A).show();a(v).show();a(ap).css({width:(ai-(r+ae)-(Z.thumbScrollButtonWidth*2))+"px"})}}else{if(Z.thumbLocation==="left"||Z.thumbLocation==="right"){var au=a(at).css("height")}}}a(ap).find("ul li.jqcg-thumb-current").removeClass("jqcg-thumb-current");C=ag(at);Q(C)};var ag=function(ar){var at={ixFirst:-1,ixLast:-1,ctTotal:0,pxListLeft:0,pxListLength:0,pxBarRight:0,thumbBarWidth:0,thumbBarHeight:0,thumbList:ar,thumbItems:null};if(!ar||!ar.length){return(at)}at.thumbItems=a(ar).children();at.ctTotal=at.thumbItems.length;if(!at.ctTotal){return}at.thumbListOffset=a(ar).offset();at.thumbListPostion=a(ar).position();at.thumbBarOffset=a(ap).offset();at.thumbBarPosition=a(ap).position();at.thumbBarWidth=a(ap).width();at.thumbBarHeight=a(ap).height();if(Z.thumbLocation==="top"||Z.thumbLocation==="bottom"){at.pxListLeft=parseInt(a(ar).css("margin-left"),10);at.pxListLength=a(ar).width();at.pxBarRight=at.thumbBarOffset.left+at.thumbBarWidth}a(at.thumbItems).each(function(av,au){var aw=a(au).offset();if(Z.thumbLocation==="top"||Z.thumbLocation==="bottom"){if(at.ixFirst<0&&aw.left>=at.thumbBarOffset.left){at.ixFirst=av}if(at.ixLast<0){if((aw.left+a(au).outerWidth())>at.pxBarRight){at.ixLast=av-1}else{if(av===at.ctTotal-1){at.ixLast=av}}}}});return(at)};var q=function(av,aw){if(!C||!C.ctTotal){return}var ar=0;var au={};var at=0;if(av==="left"){if(C.ixLast===C.ctTotal-1){return}if(C.ixLast+aw>=C.ctTotal){aw=C.ctTotal-C.ixLast-1}for(ar=C.ixFirst;ar<C.ixFirst+aw;ar++){if(Z.thumbLocation==="top"||Z.thumbLocation==="bottom"){at+=a(C.thumbItems[ar]).outerWidth(true)}}C.pxListLeft-=at;C.ixFirst+=aw}else{if(C.ixFirst<=0){return}if(C.ixFirst-aw<0){aw=C.ixFirst+1}for(ar=C.ixFirst-aw;ar<C.ixFirst;ar++){if(Z.thumbLocation==="top"||Z.thumbLocation==="bottom"){at+=a(C.thumbItems[ar]).outerWidth(true)}}C.pxListLeft+=at;C.ixFirst-=aw}if(Z.thumbLocation==="top"||Z.thumbLocation==="bottom"){au.marginLeft=C.pxListLeft+"px"}a(C.thumbList).stop().animate(au,400,function(){var az;if(Z.thumbLocation==="top"||Z.thumbLocation==="bottom"){var ay;for(ar=C.ixFirst+1;ar<C.ctTotal;ar++){az=a(C.thumbItems[ar]).offset();ay=a(C.thumbItems[ar]).outerWidth();var ax=az.left+ay;if(ax>C.pxBarRight){C.ixLast=ar-1;break}else{if(ar===C.ctTotal-1){C.ixLast=ar}}}}})};var J=function(ar,at){a(ap).find("ul li.jqcg-thumb-current").removeClass("jqcg-thumb-current");var av=a(ap).find("li:nth-child("+(ar+1)+")");a(av).addClass("jqcg-thumb-current");if(ar>=C.ixFirst&&ar<=C.ixLast){return}var au=0;var aw;if(ar<C.ixFirst){aw="right";if(!at){au=C.ixFirst-ar}else{au=C.ixFirst-ar}}else{if(ar>C.ixLast){aw="left";if(!at){au=ar-C.ixLast}else{au=ar-C.ixFirst}}}if(au>0){q(aw,au)}};var E=function(au,at,aw,av,ar){Q("showing gallery items: ["+ar+"]");K=a(au).children("li").length;Q("item count: ["+K+"]");S=ar;a(ad).find(".jqcg-viewer-gallery-title").html(aw);a(ad).find(".jqcg-viewer-gallery-desc").html(av);a(au).addClass("jqcg-viewer-slides");a(au).prependTo(af);a(au).show();a(at).appendTo(ap);a(at).show();a(ad).show();g(at);a(ad).fadeTo(500,1,function(){D();aa(0)})};var y=function(av){Q("showing gallery: ["+av+"], ixCurrentGallery: ["+S+"]");if(av<0||av>=I||av===S){Q("invalid gallery or gallery already being shown.");return}var ay=false;if(H===1){G();ay=true}k();var ax=a(x).find("li[data-gallery-ix='"+av+"']");var aA=a(ax).children("ul.jqcg-viewer-slides");var at=a(j).height();if(!aA.length){Q("gallery slides not found");var az=a(ax).attr("rel");if(az&&az.length){Q("getting gallery from rel attr: ["+az+"]");if(S<0){a(x).fadeTo(Z.animateOutSpeed,0,function(){t(az,ax,av,function(){y(av)})})}else{a(j).css({height:at+"px"});a(ad).fadeTo(500,0,function(){l(true);t(az,ax,av,function(){y(av);a(j).css({height:"auto"})})})}}if(ay){W()}return}var ar=a(ax).attr("data-title");var au=a(ax).attr("data-desc");var aw=a(ax).children("ul.jqcg-thumbs-list");if(S>=0){a(j).css({height:at+"px"});a(ad).fadeTo(500,0,function(){l(false);E(aA,aw,ar,au,av);a(j).css({height:"auto"})})}else{if(a(x).is(":visible")){a(x).fadeTo(500,0,function(){a(x).hide();E(aA,aw,ar,au,av)})}else{E(aA,aw,ar,au,av)}}if(ay){W()}};var aj=function(av,ar,at,au){a(av).find(ar).hover(function(aw){a(this).addClass("jqcg-ctl-hover");if(at&&at.length>0){aq(at,aw)}},function(aw){a(this).removeClass("jqcg-ctl-hover");if(at&&at.length>0){B(aw)}}).mousemove(function(aw){if(at&&at.length>0){L(aw)}}).click(function(){if(au){au()}return(false)})};var Z=a.extend({},a.fn.jqCoolGallery.defaults,R);var j=z;var w=this;var H=0;var d=null;var U=Math.floor(Math.random()*100000);var e=a(j).attr("id");if(e===""){e="jqcg-"+U;a(j).attr("id",e)}var S=-1;var K=0;var an=-1;var x=a(j).find("ul.jqcg-gallery");var I=0;Q("initializing: ["+e+"]");a(j).addClass("jqcoolgallery");if(Z.forceImageReload){a(j).find("img").each(function(){P(this)})}var ad=a(j).find(".jqcg-viewer");if(!ad.length){var X='<div class="jqcg-viewer-controls"><div class="jqcg-viewer-controls jqcg-gallery-controls"><ul><li class="jqcg-ctl-arrow jqcg-ctl-prev-gallery"><span>&nbsp;</span></li><li class="jqcg-ctl-home"><span>'+Z.htmlHome+'</span></li><li class="jqcg-ctl-arrow jqcg-ctl-next-gallery"><span>&nbsp;</span></li></ul></div><div class="jqcg-viewer-controls jqcg-show-controls"><ul><li class="jqcg-ctl-button jqcg-ctl-rewind"><span>&nbsp;</span></li><li class="jqcg-ctl-button jqcg-ctl-prev-slide"><span>&nbsp;</span></li><li class="jqcg-ctl-button jqcg-ctl-play"><span>&nbsp;</span></li><li class="jqcg-ctl-button jqcg-ctl-next-slide"><span>&nbsp;</span></li></ul></div><div class="jqcg-viewer-gallery-info"><'+Z.galleryTitleElement+' class="jqcg-viewer-gallery-title"></'+Z.galleryTitleElement+"><"+Z.galleryDescElement+' class="jqcg-viewer-gallery-desc"></'+Z.galleryDescElement+"></div></div>";ad=a('<div class="jqcg-viewer"><div class="jqcg-viewer-image-wrapper"></div><div class="jqcg-panel">'+X+'<div class="jqcg-viewer-text-panel"><div class="jqcg-viewer-caption"></div></div></div></div>').appendTo(j)}aj(ad,".jqcg-ctl-prev-gallery",Z.prevGalleryToolTip,function(ar){G();w.prevGallery()});aj(ad,".jqcg-ctl-next-gallery",Z.nextGalleryToolTip,function(ar){G();w.nextGallery()});aj(ad,".jqcg-ctl-home",Z.homeToolTip,function(ar){G();w.home()});aj(ad,".jqcg-ctl-rewind",Z.rewindToolTip,function(ar){G();w.firstImage()});aj(ad,".jqcg-ctl-prev-slide",Z.prevSlideToolTip,function(ar){G();w.prevImage()});aj(ad,".jqcg-ctl-next-slide",Z.nextSlideToolTip,function(ar){G();w.nextImage()});var p=a(ad).find(".jqcg-ctl-play").hover(function(ar){a(this).addClass("jqcg-ctl-hover");if(H===0&&Z.playToolTip&&Z.playToolTip.length>0){aq(Z.playToolTip,ar)}else{if(H===1&&Z.pauseToolTip&&Z.pauseToolTip.length>0){aq(Z.pauseToolTip,ar)}}},function(ar){a(this).removeClass("jqcg-ctl-hover");B(ar)}).mousemove(function(ar){L(ar)}).click(function(){w.togglePlay();if(H===1&&Z.pauseToolTip&&Z.pauseToolTip.length>0){m.html(Z.pauseToolTip)}else{if(H===1&&Z.playToolTip&&Z.playToolTip.length>0){m.html(Z.playToolTip)}}return(false)});var am=a(ad).find(".jqcg-viewer-caption");var ah=a(ad).find(".jqcg-panel");var af=a(ad).find(".jqcg-viewer-image-wrapper");if(!af.length){af=a('<div class="jqcg-viewer-image-wrapper"></div>').prependTo(ad)}a(af).empty();a(af).css({width:Z.imageAreaWidth+"px",height:Z.imageAreaHeight+"px"});if(Z.imageAreaPadding.length>0){a(af).css({padding:Z.imageAreaPadding})}var i=a('<div class="jqcg-step jqcg-step-left"></div>').appendTo(af);a(i).css({opacity:0});a(i).hover(function(){a(this).animate({opacity:1},100)},function(){a(this).animate({opacity:0},100)}).click(function(){w.prevImage()});var o=a('<div class="jqcg-step jqcg-step-right"></div>').appendTo(af);a(o).css({opacity:0});a(o).hover(function(){a(this).animate({opacity:1},100)},function(){a(this).animate({opacity:0},100)}).click(function(){w.nextImage()});var ai=a(ad).width();Q("viewer width: ["+ai+"]");var ab=a(ad).find(".jqcg-thumbs");if(!ab.length){if(Z.thumbStyle==="grid"){ab=a('<div class="jqcg-thumbs"></div>').appendTo(ah)}else{if(Z.thumbLocation==="top"||Z.thumbLocation==="left"){ab=a('<div class="jqcg-thumbs"></div>').prependTo(ad)}else{ab=a('<div class="jqcg-thumbs"></div>').appendTo(ad)}}}if(Z.panelAreaWidth>0){a(ah).width(Z.panelAreaWidth+"px")}var A=null;var v=null;if(Z.thumbStyle==="list"){A=a('<div class="jqcg-thumbs-scrollleft"></div>').appendTo(ab)}var ap=a('<div class="jqcg-thumbs-bar"></div>').appendTo(ab);if(Z.thumbStyle==="list"){v=a('<div class="jqcg-thumbs-scrollright"></div>').appendTo(ab)}var al=Z.thumbHeight+(Z.thumbPadding*2)+(Z.thumbBorderWidth*2);var r=parseInt(a(ab).css("padding-left"),10);var ae=parseInt(a(ab).css("padding-right"),10);var ao=Z.thumbWidth+(Z.thumbPadding*2)+(Z.thumbBorderWidth*2);Q("$thumbItemWidth: "+ao);var f=-1;var F=-1;var ak=null;var u=null;if(Z.thumbHelper){ak=a('<div class="jqcg-thumb-helper"></div>').appendTo("body");u=a('<img src="" width="0" height="0" alt="" />').appendTo(ak)}if(Z.thumbStyle==="grid"){a(ab).addClass("jqcg-thumbs-gridstyle");if(Z.thumbAreaWidth===-1){Z.thumbAreaWidth=a(ah).innerWidth()}a(ab).css({width:Z.thumbAreaWidth+"px",paddingTop:Z.thumbMargin+"px"});a(ap).css({width:Z.thumbAreaWidth+"px"});F=Math.floor((Z.thumbAreaWidth+Z.thumbMargin)/(ao+Z.thumbMargin));f=(ao*F)+(Z.thumbMargin*(F-1));Q("$ctThumbsPerRow: "+F+", $opts.thumbMargin: "+Z.thumbMargin+", $thumbListWidth: "+f);if(ak!==null){a('<div class="jqcg-helper-arrow jqcg-helper-arrow-down"></div>').appendTo(ak)}Q("thumbAreaWidth: "+Z.thumbAreaWidth+", thumbItemWidth: "+ao+", ctThumbsPerRow: "+F)}else{a(ab).addClass("jqcg-thumbs-liststyle");switch(Z.thumbLocation){case"top":a(ab).addClass("jqcg-thumbs-top");r=parseInt(a(ab).css("padding-left"),10);ae=parseInt(a(ab).css("padding-right"),10);a(ab).css({height:al+"px",width:(ai-r-ae)+"px"});a(A).css({width:Z.thumbScrollButtonWidth+"px",height:al+"px"});a(v).css({width:Z.thumbScrollButtonWidth+"px",height:al+"px"});if(ak!==null){a('<div class="jqcg-helper-arrow jqcg-helper-arrow-up"></div>').prependTo(ak)}break;case"bottom":a(ab).addClass("jqcg-thumbs-bottom");r=parseInt(a(ab).css("padding-left"),10);ae=parseInt(a(ab).css("padding-right"),10);a(ab).css({height:al+"px",width:(ai-r-ae)+"px"});a(A).css({width:Z.thumbScrollButtonWidth+"px",height:al+"px"});a(v).css({width:Z.thumbScrollButtonWidth+"px",height:al+"px"});if(ak!==null){a('<div class="jqcg-helper-arrow jqcg-helper-arrow-down"></div>').appendTo(ak)}break;case"left":a(ab).addClass("jqcg-thumbs-left");if(ak!==null){a('<div class="jqcg-helper-arrow jqcg-helper-arrow-left"></div>').appendTo(ak)}break;case"right":a(ab).addClass("jqcg-thumbs-right");if(ak!==null){a('<div class="jqcg-helper-arrow jqcg-helper-arrow-right"></div>').appendTo(ak)}break}}if(A!==null){a(A).hover(function(){if(C.ixFirst>0){a(this).addClass("jqcg-thumbs-scrollleft-hover")}},function(){a(this).removeClass("jqcg-thumbs-scrollleft-hover")});A.click(function(){q("right",1)})}if(v!==null){a(v).hover(function(){if(C.ixLast<C.ctTotal-1){a(this).addClass("jqcg-thumbs-scrollright-hover")}},function(){a(this).removeClass("jqcg-thumbs-scrollright-hover")});v.click(function(){q("left",1)})}if(Z.keyboardInput===true){a(j).attr("tabindex",100);a(document).keydown(function(ax){if(!a(j).is(":focus")){return(true)}var aw=(ax.keyCode?ax.keyCode:ax.which);var ay,au,at,ar;var av=false;switch(aw){case 32:w.togglePlay();av=true;break;case 35:w.stop();w.lastImage();av=true;break;case 36:w.stop();w.firstImage();av=true;break;case 37:w.stop();w.prevImage();av=true;break;case 38:if(Z.thumbStyle==="grid"){w.stop();if(an>F-1){ay=Math.floor(an/F)+1;au=an%F+1;at=Math.max(ay-1,1);ar=((F*at)-1)-(F-au);Q("MOVE UP - from: [row: "+ay+", col: "+au+"], newRow: "+at+", ixMoveTo: "+ar);aa(ar)}av=true}break;case 39:w.stop();w.nextImage();av=true;break;case 40:if(Z.thumbStyle==="grid"){w.stop();ay=Math.floor(an/F)+1;au=an%F+1;at=Math.max(ay+1,1);Q("MOVE DOWN - from: [row: "+ay+", col: "+au+"], newRow: "+at);if(at>ay){ar=((F*at)-1)-(F-au);Q("ixMoveTo: "+ar+", $ctGalleryItems: "+K);if(ar>=K){ar=K-1}aa(ar)}av=true}break}return(!av)})}var C=null;var O=a('<div class="jqcg-tooltip" style="opacity:0;"></div>').appendTo("body");var m=a('<div class="jqcg-tooltip-content"></div>').appendTo(O);var T=a('<div id="'+e+'-loader" class="jqcg-loading" style="display:none;"></div>').appendTo("body");a(ad).hide();a(ad).css("opacity",0);var h=a(x).attr("data-gallery-tooltip");if(typeof(h)==="undefined"||!h.length){h=Z.galleryTooltip}a(x).children("li").each(function(ar){M(this,ar)});a(x).css({left:0,opacity:0});if(I<=0){a(ad).empty();a(ad).html("<p>No galleries or images found.</p>")}else{if(I===1){var n=a(ad).find("div.jqcg-gallery-controls");a(n).hide()}if(Z.openGallery>=0){y(Z.openGallery)}else{a(x).fadeTo(Z.initialFadeSpeed,1)}}this.home=function(){Q("going home");G();if(S>=0){k();ad.fadeTo(500,0,function(){l(true);D();a(x).show();a(x).stop().fadeTo(500,1)})}};this.play=function(){W()};this.stop=function(){G()};this.togglePlay=function(){if(H===0){W()}else{G()}};this.firstImage=function(){Q("firstImage");if(S<0){y(0);return}aa(0)};this.lastImage=function(){Q("lastImage");if(S<0){y(0);return}aa(K-1)};this.nextImage=function(){Q("nextImage");if(S<0){y(0);return}var ar=an+1;if(ar>=K){if(Z.loopGalleries){this.nextGallery();return}ar=0}aa(ar)};this.prevImage=function(){Q("prevImage");if(S<0){y(0);return}var ar=an-1;if(ar<0){if(Z.loopGalleries){this.prevGallery();return}ar=K-1}aa(ar)};this.nextGallery=function(){Q("nextGallery");var ar=S+1;if(ar>I-1){if(!Z.loopGalleries){return}ar=0}y(ar)};this.prevGallery=function(){Q("prevGallery");var ar=S-1;if(ar<0){if(!Z.loopGalleries){return}ar=I-1}y(ar)}};a.fn.jqCoolGallery=function(c,d){return this.each(function(){var e=a(this);var g=e.data("jqCoolGallery");if(g&&typeof(c)==="string"){var f=g[c];if(typeof(f)==="function"){return(f(d))}return}if(g){return}if(a.metadata){c=a.extend({},c,e.metadata())}e.data("jqCoolGallery",new b(this,c))})};a.fn.jqCoolGallery.defaults={galleryTileWidth:200,galleryTileHeight:200,galleryColumnCount:-1,galleryHoverCaption:true,galleryHoverExpand:true,galleryHoverExpandPx:5,galleryTitleElement:"h3",galleryDescElement:"p",openGallery:-1,playSpeed:3000,animateInSpeed:200,animateOutSpeed:200,initialFadeSpeed:2000,loopGalleries:false,imageAreaWidth:-1,imageAreaHeight:-1,imageAreaAlign:"center",imageAreaPadding:"0",panelAreaWidth:-1,thumbLocation:"bottom",thumbStyle:"list",thumbAreaWidth:-1,thumbHelper:true,thumbHelperMaxWidth:100,thumbHelperMaxHeight:100,thumbWidth:100,thumbHeight:100,thumbPadding:0,thumbMargin:4,thumbBorderWidth:1,thumbImageWidth:-1,thumbImageHeight:-1,thumbScrollButtonWidth:25,forceImageReload:true,forceDemandReload:true,forceDemandReloadParam:"_jqcg_",htmlHome:"All Galleries",homeToolTip:"return to all galleries",galleryTooltip:"",playToolTip:"start the slideshow",pauseToolTip:"pause the slideshow",prevGalleryToolTip:"open the previous gallery",nextGalleryToolTip:"open the next gallery",nextSlideToolTip:"next slide",prevSlideToolTip:"previous slide",rewindToolTip:"first slide",fnGalleryClick:null,keyboardInput:true,debug:false}})(jQuery);